<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // let p2 = new Promise((resolve, reject) => reject('a'));
    // setTimeout(console.log, 0, p2); // Promise <rejected>
    // setTimeout(() => {console.log(p2)}, 0)
    // Uncaught error (in promise)

    // let p = new Promise((resolve, reject) => {
    //   setTimeout(reject, 10000); // 10 秒后调用 reject() 
    //   // 执行函数的逻辑
    // });
    // setTimeout(console.log, 0, p); // Promise <pending> 
    // setTimeout(console.log, 10000, p); // Promise <pending> 
    // setTimeout(console.log, 11000, p); // 11 秒后再检查状态
    // (After 10 seconds) Uncaught error 
    // (After 11 seconds) Promise <rejected>



    // let p = Promise.reject(3);
    // setTimeout(console.log, 0, p); // Promise <rejected>: 3 
    // p.then((a)=> console.log(a), (e) => setTimeout(console.log, 0, e)); // 3


    // // 创建解决的期约
    // let p = Promise.resolve();
    // // 添加解决处理程序
    // // 直觉上，这个处理程序会等期约一解决就执行
    // p.then(() => console.log('onResolved handler'));
    // // 同步输出，证明 then()已经返回
    // console.log('then() returns');
    // // 实际的输出：
    // // then() returns 
    // // onResolved handler


    // let p1 = Promise.resolve();
    // // let p2 = Promise.reject();
    // p1.then(() => setTimeout(console.log, 0, 1));
    // p1.then(() => setTimeout(console.log, 0, 2));
    // 1 
    // 2 
    // p2.then(null, () => setTimeout(console.log, 6000, 3));
    // p2.then(null, () => setTimeout(console.log, 5000, 4));
    // // 3 
    // // 4 
    // p2.catch(() => setTimeout(console.log, 4000, 5));
    // p2.catch(() => setTimeout(console.log, 3000, 6));
    // // 5 
    // // 6 
    // p1.finally(() => setTimeout(console.log, 2000, 7));
    // p1.finally(() => setTimeout(console.log, 1000, 8));
    // 7
    // 8

    // Promise.reject(Error('foo')); 
    // console.log('bar');

    // function addTwo(x) {return x + 2;} 
    // function addThree(x) {return x + 3;} 
    // function addFive(x) {return x + 5;}
    // function addTen(x) { 
    //   return [addTwo, addThree, addFive] 
    //     .reduce((promise, fn) => promise.then(fn), Promise.resolve(x)); 
    // }

    // let arr = [1,2,3,4]
    // arr.reduce((el,index)=> {
    //   console.log(el,index)
    //   return el + index
    // },100)

    // let p = new Promise((resolve, reject) => { 
    // setTimeout(reject, 10000); // 10 秒后调用 reject() 
    // // 执行函数的逻辑
    // }); 
    // setTimeout(console.log, 0, p); // Promise <pending> 
    // setTimeout(console.log, 11000, p);

    // let p2 = Promise.all([
    //   Promise.resolve(),
    //   Promise.resolve(),
    //   console.log(22),
    //   Promise.resolve()
    // ]);
    // setTimeout(console.log, 0, p2); // Promise <rejected>
    // p2.then(values => {
    //   console.log(values)
    // })

    // [1,2,3].reduce((acc,cur) => {
    //   console.log(acc)
    // })

    // function addTwo(x) { return x + 2; }
    // function addThree(x) { return x + 3; }
    // function addFive(x) { return x + 5; }
    // function addTen(x) {
    //   return [addTwo, addThree, addFive]
    //     .reduce((promise, fn) => promise.then(fn), Promise.resolve(x));
    // }
    // addTen(8).then(console.log); // 18

    // let p = Promise.resolve(8)
    // p.then(function addTwo(x) { return x + 2; },x => x+3)
    // .then(console.log)

    // async function baz() {
    //   const thenable = {
    //     then(callback) { callback('baz'); }
    //   };
    //   console.log(await thenable);
    // }
    // baz();

    // async function foo() {
    //   console.log(2);
    //   console.log(await Promise.resolve(8));
    //   console.log(9);
    // }
    // async function bar() {
    //   console.log(4);
    //   console.log(await 6);
    //   console.log(7);
    // }
    // console.log(1);
    // foo();
    // console.log(3);
    // bar();
    // console.log(5);

    //实现sleep函数
    //  function sleep(delay) {
    //   //  new Promise((res) => setTimeout(res, delay));
    //   return new Promise(res => setTimeout(()=>res('aa'), delay));
    //   // return setTimeout(Promise.resolve(),1000) 
    //   // return Promise.resolve();
    // }
    // async function foo() {
    //   const t0 = Date.now();
    //   let res = await sleep(1500); // 暂停约 1500 毫秒
    //   console.log(res)
    //   console.log(Date.now() - t0);
    // }
    // foo();
    // 1502


    // async function test() {
    //   let a = (de) => new Promise(re => setTimeout(re, de));
    //   let time = Date.now();
    //   let j = async () => {
    //     return a(1000)
    //   }
    //   console.log(await j());
    //   console.log(Date.now() - time);
    // }
    // test()

    // async function sleep() {
    //   await setTimeout(() => {
    //     return 'nihao'
    //   },1500)
    // }
    // async function foo() {
    //   const t0 = Date.now();
    //   // let res = await sleep(1500); // 暂停约 1500 毫秒
    //   let res = await sleep()
    //   console.log(res)
    //   console.log(Date.now() - t0);
    // }
    // foo();


//     async function foo() { 
//     console.log(await Promise.resolve('foo')); 
// } 
// async function bar() { 
//  console.log(await 'bar'); 
// } 
// async function baz() { 
//  console.log('baz'); 
// } 
// foo(); 
// bar(); 
// baz();


// function test() {
//   console.log(1)
// }
// setTimeout(function test(){console.log(1)},1000)
// setTimeout(test(),1000)
// setTimeout(()=>test(),1000)



function sleep(delay) {
  // return new Promise((res, rej) => setTimeout(rej, delay));
  return Promise.reject(11)
}
async function foo() {
    const t0 = Date.now();
    await sleep(1500); // 暂停约 1500 毫秒
    console.log(Date.now() - t0);
}
foo();

  </script>
</body>

</html>