<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>

    //模拟实现call关键字
    // let obj = {
    //   value: 1
    // }
    // function bar(name, age) {
    //   console.log(this.value)
    //   return {
    //     value: this.value,
    //     name: name,
    //     age: age
    //   }
    // }
    // // bar.call(obj,'jack',10)
    // Function.prototype.call2 = function (context) {
    //   var context = context || window
    //   context.fn = this
    //   let args = []
    //   for(var i = 1; i < arguments.length; i++) {
    //     args.push('arguments[' + i + ']')
    //   }
    //   var result = eval('context.fn('+ args + ') ')
    //   delete context.fn
    //   return result
    // }
    // bar.call2(obj, 'jack', 10)

    //模拟实现bind关键字

    // var foo = {
    //   value: 1
    // };
    // function bar() {
    //   console.log(this.value);
    // }
    // // var bindFoo = bar.bind(foo);
    // // bindFoo(); // 1
    // Function.prototype.bind2 = function(context) {
    //   if(typeof this !== "function") {
    //     throw new Error("Function.prototype.bind - what is trying to be bound is not callable")
    //   }
    //   var self = this
    //   let args = [].slice.call(arguments,1)
    //   function fnop(){}
    //   fnop.prototype = self.prototype
    //   fn.prototype = new fnop()
    //   let fn =  function() {
    //     let boundArgs = [].slice.call(arguments)
    //     return self.apply(this instanceof fnop ? this : context, args.concat(boundArgs))
    //   }
    //   return fn
    // }
    // var bindFoo = bar.bind2(foo);
    // bindFoo(); // 1


    //模拟实现关键字new
    function objectFactory() {
      let object = new Object()
      Constructor = [].shift.call(arguments)
      object.__proto__ = Constructor.prototype
      let res = Constructor.aplly(object,arguments)
      return typeof res === "object" ? res : object
    }




  </script>
</body>

</html>